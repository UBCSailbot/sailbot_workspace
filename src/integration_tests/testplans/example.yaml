# Example testplan - Does not currently show HTTP I/O
timeout_sec: 3

required_packages:
  - name: local_pathfinding
    configs: # Start local_pathfinding with default configuration
  - name: network_systems
    configs:
      - all_disable.yaml
      - example/example_en.yaml
      - mock_ais/mock_ais_en_default.yaml

inputs:
  - type: ROS
    name: cached_fib_in
    data:
      dtype: uint64
      val: 6
  - type: ROS
    name: mock_gps
    data:
      dtype: GPS
      lat_lon:
          dtype: HelperLatLon
          latitude:
              dtype: float32
              val: 1
          longitude:
              dtype: float32
              val: -1
      speed:
          dtype: HelperSpeed
          speed:
              dtype: float32
              val: 5
      heading:
          dtype: HelperHeading
          heading:
              dtype: float32
              val: 180
  # Global Path used to test list datatype parsing, it's not actually monitored in this example
  - type: ROS
    name: global_path
    data:
      dtype: Path
      waypoints:
        - dtype: HelperLatLon
          latitude:
              dtype: float32
              val: 2
          longitude:
              dtype: float32
              val: -2
        - dtype: HelperLatLon
          latitude:
              dtype: float32
              val: 3
          longitude:
              dtype: float32
              val: -3
  - type: HTTP
    name: gps
    data:
      dtype: GPS
      latitude: 1.0
      longitude: 2.0
      speed: 10.0
      heading: 180.0
  - type: HTTP
    name: ais_ships
    data:
      dtype: Ships
      ships:
        - dtype: Ship
          latitude: 1.0
          longitude: 2.0
          sog: 10.0
          cog: 180.0
          rot: 2.32
          width: 321.0
          length: 121.2
        - dtype: Ship
          latitude: -11.41931
          longitude: -131.14706420
          sog: 20.0
          cog: 190.0
          rot: 3.32
          width: 421.0
          length: 221.2
  - type: HTTP
    name: batteries
    data:
      dtype: Batteries
      ships:
        - dtype: Battery
          voltage: 198.48098754882812
          current: -160.0299835205078
        - dtype: Battery
          voltage: 167.8837127685547
          current: -109.57650756835938
  - type: HTTP
    name: local_path
    data:
      dtype: Path
      waypoints:
        - dtype: HelperLatLon
          latitude:
              val: 2
          longitude:
              val: -2
        - dtype: HelperLatLon
          latitude:
              val: 3
          longitude:
              val: -3

expected_outputs:
  - type: ROS
    name: cached_fib_out
    data:
      dtype: uint64
      val: 5
  # monitoring an input as an output is allowed
  - type: ROS
    name: cached_fib_in
    data:
      dtype: uint64
      val: 6
  - type: ROS
    name: mock_ais_ships
    data:
      dtype: AISShips
      DONT_CARE: True
