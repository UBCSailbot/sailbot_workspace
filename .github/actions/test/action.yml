name: 'Test'
description: 'Test using devcontainer'
runs:
  using: "composite"
  steps:
    - name: Build Containers
      shell: bash
      run: docker-compose -f .github/actions/docker-compose.ci.yml -f .github/actions/docker-compose.ci.website.yml build

    - name: Run Containers
      shell: bash
      run: docker-compose -f .github/actions/docker-compose.ci.yml -f .github/actions/docker-compose.ci.website.yml up -d

    - name: Run Tests
      shell: bash
      run: docker-compose -f .github/actions/docker-compose.ci.yml -f .github/actions/docker-compose.ci.website.yml exec -T sailbot-workspace /bin/bash -c "cd /workspaces/sailbot_workspace && .github/actions/test/run.sh"
